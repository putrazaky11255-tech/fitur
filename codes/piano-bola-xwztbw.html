<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéµ Piano Bola Interaktif</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            animation: slideDown 0.5s ease-out;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 {
            color: white;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .music-icon {
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
            gap: 2rem;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            width: 100%;
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .canvas-wrapper {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        canvas {
            display: block;
            width: 100%;
            height: 500px;
            background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 50%, #FFF9E6 100%);
            cursor: pointer;
        }

        .controls {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        button:active {
            transform: translateY(0);
        }

        .info-panel {
            background: rgba(102, 126, 234, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-card {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .note-indicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            color: rgba(255, 255, 255, 0.9);
            pointer-events: none;
            opacity: 0;
            animation: noteFloat 1s ease-out;
            z-index: 1000;
        }

        @keyframes noteFloat {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            50% {
                opacity: 1;
                transform: translate(-50%, -70%) scale(1.2);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -90%) scale(1);
            }
        }

        footer {
            background: rgba(0, 0, 0, 0.2);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .social-link {
            color: white;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .social-link:hover {
            transform: translateY(-3px) scale(1.2);
            color: #ffd700;
        }

        .social-link:active {
            transform: translateY(0) scale(1);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }
            
            canvas {
                height: 400px;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            button {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>
                <span class="music-icon">üéπ</span>
                Piano Bola Interaktif
            </h1>
            <div style="color: white; display: flex; align-items: center; gap: 0.5rem;">
                <span>üéµ</span>
                <span>Klik bola untuk memainkan nada!</span>
            </div>
        </div>
    </header>

    <main>
        <div class="game-container">
            <div class="canvas-wrapper">
                <canvas id="gameCanvas"></canvas>
            </div>
            
            <div class="controls">
                <button onclick="resetBalls()">
                    <span>üîÑ</span>
                    Reset Bola
                </button>
                <button onclick="addBall()">
                    <span>‚ûï</span>
                    Tambah Bola
                </button>
                <button onclick="toggleGravity()">
                    <span>üåç</span>
                    <span id="gravityText">Gravitasi: ON</span>
                </button>
                <button onclick="toggleSound()">
                    <span>üîä</span>
                    <span id="soundText">Suara: ON</span>
                </button>
            </div>

            <div class="info-panel">
                <h3 style="color: #667eea; margin-bottom: 1rem;">üìä Statistik Permainan</h3>
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value" id="clickCount">0</div>
                        <div class="stat-label">Total Klik</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="ballCount">1</div>
                        <div class="stat-label">Jumlah Bola</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="noteCount">0</div>
                        <div class="stat-label">Nada Dimainkan</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="comboCount">0</div>
                        <div class="stat-label">Combo</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 Piano Bola Interaktif. Dibuat dengan ‚ù§Ô∏è dan üéµ</p>
        <div class="social-links">
            <span class="social-link" onclick="socialClick('WhatsApp')">üì±</span>
            <span class="social-link" onclick="socialClick('Facebook')">üìò</span>
            <span class="social-link" onclick="socialClick('Twitter')">üê¶</span>
            <span class="social-link" onclick="socialClick('Telegram')">‚úàÔ∏è</span>
            <span class="social-link" onclick="socialClick('Instagram')">üì∑</span>
        </div>
    </footer>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Set canvas size
        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Audio Context
        let audioContext = null;
        let soundEnabled = true;
        let gravityEnabled = true;

        // Piano notes frequencies (C4 to B5)
        const pianoNotes = [
            261.63, 277.18, 293.66, 311.13, 329.63, 349.23, 369.99, 392.00,
            415.30, 440.00, 466.16, 493.88, 523.25, 554.37, 587.33, 622.25,
            659.25, 698.46, 739.99, 783.99, 830.61, 880.00, 932.33, 987.77
        ];

        const noteNames = [
            'C4', 'C#4', 'D4', 'D#4', 'E4', 'F4', 'F#4', 'G4',
            'G#4', 'A4', 'A#4', 'B4', 'C5', 'C#5', 'D5', 'D#5',
            'E5', 'F5', 'F#5', 'G5', 'G#5', 'A5', 'A#5', 'B5'
        ];

        // Game state
        let balls = [];
        let stats = {
            clicks: 0,
            notes: 0,
            combo: 0,
            lastClickTime: 0
        };

        // Ball class
        class Ball {
            constructor(x, y) {
                this.x = x || Math.random() * (canvas.width - 60) + 30;
                this.y = y || 50;
                this.radius = 25;
                this.vx = (Math.random() - 0.5) * 4;
                this.vy = 0;
                this.color = this.generateColor();
                this.trail = [];
                this.maxTrailLength = 10;
                this.glowIntensity = 0;
            }

            generateColor() {
                const colors = [
                    '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', 
                    '#FFEAA7', '#DDA0DD', '#98D8C8', '#F7DC6F'
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            }

            update() {
                // Add trail
                this.trail.push({ x: this.x, y: this.y });
                if (this.trail.length > this.maxTrailLength) {
                    this.trail.shift();
                }

                // Apply gravity
                if (gravityEnabled) {
                    this.vy += 0.5;
                }

                // Update position
                this.x += this.vx;
                this.y += this.vy;

                // Bounce off walls
                if (this.x + this.radius > canvas.width || this.x - this.radius < 0) {
                    this.vx = -this.vx * 0.8;
                    this.x = this.x + this.radius > canvas.width ? 
                            canvas.width - this.radius : this.radius;
                }

                // Bounce off floor
                if (this.y + this.radius > canvas.height) {
                    this.vy = -this.vy * 0.7;
                    this.y = canvas.height - this.radius;
                    
                    // Add some friction
                    this.vx *= 0.95;
                }

                // Decrease glow
                if (this.glowIntensity > 0) {
                    this.glowIntensity -= 0.02;
                }
            }

            draw() {
                // Draw trail
                this.trail.forEach((point, index) => {
                    ctx.globalAlpha = index / this.trail.length * 0.3;
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, this.radius * (index / this.trail.length), 0, Math.PI * 2);
                    ctx.fillStyle = this.color;
                    ctx.fill();
                });

                ctx.globalAlpha = 1;

                // Draw glow effect
                if (this.glowIntensity > 0) {
                    const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.radius * 2);
                    gradient.addColorStop(0, `rgba(255, 255, 255, ${this.glowIntensity})`);
                    gradient.addColorStop(0.5, `rgba(255, 215, 0, ${this.glowIntensity * 0.5})`);
                    gradient.addColorStop(1, 'rgba(255, 215, 0, 0)');
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius * 2, 0, Math.PI * 2);
                    ctx.fill();
                }

                // Draw ball
                const gradient = ctx.createRadialGradient(
                    this.x - this.radius/3, this.y - this.radius/3, 0,
                    this.x, this.y, this.radius
                );
                gradient.addColorStop(0, 'rgba(255, 255, 255, 0.8)');
                gradient.addColorStop(0.3, this.color);
                gradient.addColorStop(1, this.shadeColor(this.color, -30));

                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fill();

                // Draw highlight
                ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';
                ctx.beginPath();
                ctx.arc(this.x - this.radius/3, this.y - this.radius/3, this.radius/3, 0, Math.PI * 2);
                ctx.fill();
            }

            shadeColor(color, percent) {
                const num = parseInt(color.replace("#",""), 16);
                const amt = Math.round(2.55 * percent);
                const R = (num >> 16) + amt;
                const G = (num >> 8 & 0x00FF) + amt;
                const B = (num & 0x0000FF) + amt;
                return "#" + (0x1000000 + (R<255?R<1?0:R:255)*0x10000 + 
                        (G<255?G<1?0:G:255)*0x100 + (B<255?B<1?0:B:255))
                        .toString(16).slice(1);
            }

            isClicked(x, y) {
                const distance = Math.sqrt((x - this.x) ** 2 + (y - this.y) ** 2);
                return distance <= this.radius;
            }

            playSound() {
                if (!soundEnabled) return;

                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }

                const noteIndex = Math.floor(Math.random() * pianoNotes.length);
                const frequency = pianoNotes[noteIndex];
                const noteName = noteNames[noteIndex];

                // Create oscillator
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                // Set up oscillator
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);

                // ADSR envelope
                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.2, audioContext.currentTime + 0.1);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

                // Connect nodes
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                // Play sound
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);

                // Show note indicator
                showNoteIndicator(noteName);

                // Add visual feedback
                this.glowIntensity = 1;
                this.vy = -15; // Jump effect
                this.vx = (Math.random() - 0.5) * 10;

                // Update stats
                stats.notes++;
                updateStats();
            }
        }

        // Initialize with one ball
        balls.push(new Ball());

        // Show note indicator
        function showNoteIndicator(noteName) {
            const indicator = document.createElement('div');
            indicator.className = 'note-indicator';
            indicator.textContent = `‚ô™ ${noteName}`;
            document.body.appendChild(indicator);
            
            setTimeout(() => {
                indicator.remove();
            }, 1000);
        }

        // Game loop
        function gameLoop() {
            // Clear canvas with gradient background
            const bgGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            bgGradient.addColorStop(0, '#87CEEB');
            bgGradient.addColorStop(0.5, '#E0F6FF');
            bgGradient.addColorStop(1, '#FFF9E6');
            ctx.fillStyle = bgGradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw ground
            ctx.fillStyle = 'rgba(139, 69, 19, 0.3)';
            ctx.fillRect(0, canvas.height - 10, canvas.width, 10);

            // Update and draw balls
            balls.forEach(ball => {
                ball.update();
                ball.draw();
            });

            requestAnimationFrame(gameLoop);
        }

        // Handle clicks
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            let ballClicked = false;
            balls.forEach(ball => {
                if (ball.isClicked(x, y)) {
                    ball.playSound();
                    ballClicked = true;
                }
            });

            if (ballClicked) {
                stats.clicks++;
                
                // Update combo
                const currentTime = Date.now();
                if (currentTime - stats.lastClickTime < 1000) {
                    stats.combo++;
                } else {
                    stats.combo = 1;
                }
                stats.lastClickTime = currentTime;
                
                updateStats();
            }
        });

        // Update stats display
        function updateStats() {
            document.getElementById('clickCount').textContent = stats.clicks;
            document.getElementById('ballCount').textContent = balls.length;
            document.getElementById('noteCount').textContent = stats.notes;
            document.getElementById('comboCount').textContent = stats.combo;
        }

        // Control functions
        function resetBalls() {
            balls = [new Ball()];
            stats = { clicks: 0, notes: 0, combo: 0, lastClickTime: 0 };
            updateStats();
        }

        function addBall() {
            if (balls.length < 10) {
                balls.push(new Ball());
                updateStats();
            }
        }

        function toggleGravity() {
            gravityEnabled = !gravityEnabled;
            document.getElementById('gravityText').textContent = `Gravitasi: ${gravityEnabled ? 'ON' : 'OFF'}`;
        }

        function toggleSound() {
            soundEnabled = !soundEnabled;
            document.getElementById('soundText').textContent = `Suara: ${soundEnabled ? 'ON' : 'OFF'}`;
        }

        function socialClick(platform) {
            // Visual feedback
            event.target.style.transform = 'scale(0.9)';
            setTimeout(() => {
                event.target.style.transform = '';
            }, 200);
            
            // In a real app, this would open the social media
            console.log(`Clicked ${platform} link`);
        }

        // Start game
        gameLoop();
        updateStats();
    </script>
</body>
</html>