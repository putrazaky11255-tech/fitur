<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataCleaner Pro - Aplikasi Pembersih Data</title>
    <style>
        :root {
            --primary-color: #4A90E2;
            --secondary-color: #50E3C2;
            --background-color: #F4F7F9;
            --card-background: #FFFFFF;
            --text-color: #333333;
            --text-light: #777777;
            --border-color: #E0E0E0;
            --danger-color: #E74C3C;
            --success-color: #2ECC71;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow-x: hidden;
        }

        /* --- Main Content Area --- */
        .app-container {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 80px; /* Space for bottom nav */
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        .page {
            width: 100%;
            padding: 20px;
            display: none; /* Hide all pages by default */
            animation: fadeIn 0.5s ease-in-out;
        }

        .page.active {
            display: block; /* Show only the active page */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Home Page --- */
        .home-header {
            text-align: center;
            margin-top: 30px;
            margin-bottom: 40px;
        }

        .home-header h1 {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .home-header p {
            color: var(--text-light);
            font-size: 1.1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--card-background);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
        }

        .stat-card .icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        .stat-card .value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        .stat-card .label {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: 5px;
        }

        .action-button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.4);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .action-button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.5);
        }

        /* --- Cleaner Page --- */
        .upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            background-color: var(--card-background);
            transition: border-color 0.3s ease, background-color 0.3s ease;
            cursor: pointer;
        }

        .upload-area:hover, .upload-area.dragover {
            border-color: var(--primary-color);
            background-color: #f0f8ff;
        }

        .upload-area p {
            margin-top: 15px;
            color: var(--text-light);
        }

        .file-input {
            display: none;
        }

        .results-container {
            margin-top: 30px;
            width: 100%;
        }

        .result-item {
            background: var(--card-background);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .result-item .details {
            flex-grow: 1;
        }
        .result-item .details h4 {
            margin-bottom: 5px;
        }
        .result-item .details p {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .result-item .actions button {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            margin-left: 10px;
            transition: transform 0.2s ease;
        }
        .result-item .actions button:hover {
            transform: scale(1.2);
        }

        /* --- Gallery & About Pages --- */
        .gallery-grid, .about-content {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            width: 100%;
        }

        .gallery-item, .about-card {
            background: var(--card-background);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .gallery-item:hover, .about-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .gallery-item img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .about-card {
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .about-card .icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        .about-card h3 {
            margin-bottom: 10px;
        }
        .about-card p {
            color: var(--text-light);
            font-size: 0.95rem;
        }

        /* --- Bottom Navigation --- */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--card-background);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 5px;
            color: var(--text-light);
            text-decoration: none;
            font-size: 0.8rem;
            transition: color 0.3s ease;
        }

        .nav-item.active {
            color: var(--primary-color);
        }

        .nav-item span {
            font-size: 1.5rem;
            margin-bottom: 3px;
        }

        /* --- Loading Spinner --- */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: var(--primary-color);
            animation: spin 1s ease infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <div class="app-container">
        <!-- Home Page -->
        <div id="home" class="page active">
            <div class="home-header">
                <h1>DataCleaner Pro</h1>
                <p>Solusi Cepat untuk Membersihkan & Mengoptimalkan Data Anda</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="icon">üìÅ</div>
                    <div class="value" id="fileCount">0</div>
                    <div class="label">File Diproses</div>
                </div>
                <div class="stat-card">
                    <div class="icon">üßπ</div>
                    <div class="value" id="errorsFixed">0</div>
                    <div class="label">Error Diperbaiki</div>
                </div>
                <div class="stat-card">
                    <div class="icon">üìâ</div>
                    <div class="value" id="dataOptimized">0 MB</div>
                    <div class="label">Data Di-optimasi</div>
                </div>
            </div>

            <button class="action-button" onclick="showPage('cleaner')">Mulai Pembersihan Sekarang</button>
        </div>

        <!-- Cleaner Page -->
        <div id="cleaner" class="page">
            <h2 style="text-align: center; margin-bottom: 20px;">Pembersih Data</h2>
            <div class="upload-area" id="uploadArea">
                <span style="font-size: 3rem;">üì§</span>
                <p>Drag & drop file CSV/JSON Anda di sini atau klik untuk memilih</p>
                <input type="file" id="fileInput" class="file-input" accept=".csv,.json" multiple>
            </div>
            <div id="resultsContainer" class="results-container"></div>
        </div>

        <!-- Gallery Page -->
        <div id="gallery" class="page">
            <h2 style="text-align: center; margin-bottom: 20px;">Galeri Fitur</h2>
            <div class="gallery-grid">
                <div class="gallery-item">
                    <img src="https://static2.avg.com/10004631/web/i/avg-memory-cleaner/easier.jpg" alt="Pembersihan Aplikasi">
                    <div style="padding: 15px;">
                        <h4>Pembersihan Cerdas</h4>
                        <p style="font-size: 0.9rem; color: var(--text-light);">Mendeteksi dan membersihkan data sampah secara otomatis.</p>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://www.filecenter.com/blog/wp-content/uploads/2022/02/Effective-file-management-tips-to-keep-your-files-organized-and-secure.jpg" alt="Manajemen File">
                    <div style="padding: 15px;">
                        <h4>Manajemen File</h4>
                        <p style="font-size: 0.9rem; color: var(--text-light);">Organisir dan kelola file Anda dengan lebih efisien.</p>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://cdn.prod.website-files.com/64fef88ee8b22d3d21b715a2/663db74c18c559c759a9a476_Data%20optimization%20webp.webp" alt="Optimasi Data">
                    <div style="padding: 15px;">
                        <h4>Optimasi Data</h4>
                        <p style="font-size: 0.9rem; color: var(--text-light);">Perkecil ukuran file dan tingkatkan kinerja data.</p>
                    </div>
                </div>
                 <div class="gallery-item">
                    <img src="https://play-lh.googleusercontent.com/Ziae4rOdAdiN2xRHLqnYxbYnx5He-1eC3qiadZHfY3FijQ_U284W40P5fGW23q5xCw=w526-h296-rw" alt="Analisis">
                    <div style="padding: 15px;">
                        <h4>Analisis Mendalam</h4>
                        <p style="font-size: 0.9rem; color: var(--text-light);">Dapatkan laporan detail tentang kondisi data Anda.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Page -->
        <div id="about" class="page">
            <h2 style="text-align: center; margin-bottom: 20px;">Tentang Aplikasi</h2>
            <div class="about-content">
                <div class="about-card">
                    <div class="icon">üöÄ</div>
                    <h3>Cepat & Efisien</h3>
                    <p>Proses pembersihan data berjalan di latar belakang dengan teknologi terkini untuk hasil maksimal dalam waktu singkat.</p>
                </div>
                <div class="about-card">
                    <div class="icon">üîí</div>
                    <h3>Aman & Terpercaya</h3>
                    <p>Privasi data Anda adalah prioritas kami. Kami tidak menyimpan file Anda dan semua proses dilakukan secara aman.</p>
                </div>
                <div class="about-card">
                    <div class="icon">üí°</div>
                    <h3>Mudah Digunakan</h3>
                    <p>Antarmuka yang intuitif dan sederhana membuat siapa saja dapat menggunakan aplikasi ini tanpa kesulitan.</p>
                </div>
                <div class="about-card">
                    <div class="icon">üåê</div>
                    <h3>Berbasis Web</h3>
                    <p>Tidak perlu instalasi. Akses aplikasi pembersih data powerfull ini dari browser mana saja, kapan saja.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="#home" class="nav-item active" data-page="home">
            <span>üè†</span>
            Beranda
        </a>
        <a href="#cleaner" class="nav-item" data-page="cleaner">
            <span>üßπ</span>
            Pembersih
        </a>
        <a href="#gallery" class="nav-item" data-page="gallery">
            <span>üñºÔ∏è</span>
            Galeri
        </a>
        <a href="#about" class="nav-item" data-page="about">
            <span>‚ÑπÔ∏è</span>
            Tentang
        </a>
    </nav>

    <script>
        // --- PAGE NAVIGATION ---
        const pages = document.querySelectorAll('.page');
        const navItems = document.querySelectorAll('.nav-item');

        function showPage(pageId) {
            pages.forEach(page => page.classList.remove('active'));
            navItems.forEach(item => item.classList.remove('active'));

            document.getElementById(pageId).classList.add('active');
            document.querySelector(`[data-page="${pageId}"]`).classList.add('active');
        }

        navItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                const pageId = item.getAttribute('data-page');
                showPage(pageId);
            });
        });

        // --- CLEANER PAGE LOGIC ---
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const resultsContainer = document.getElementById('resultsContainer');

        // Stats
        let stats = {
            fileCount: 0,
            errorsFixed: 0,
            dataOptimized: 0 // in MB
        };

        // OpenRefine API Endpoint (Public Demo Instance - Mungkin tidak stabil)
        const OPENREFINE_SERVER = "https://refine-demo.openrefine.org";
        const PROXY_URL = "https://cors-anywhere.herokuapp.com/";

        uploadArea.addEventListener('click', () => fileInput.click());

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            handleFiles(e.dataTransfer.files);
        });

        fileInput.addEventListener('change', () => {
            handleFiles(fileInput.files);
        });

        async function handleFiles(files) {
            for (const file of files) {
                // Simulate file processing
                addResultItem(file.name, 'processing');
                
                // Because a real OpenRefine server is complex and requires a live instance,
                // we will simulate the process with a timeout.
                // In a real-world scenario, you would use the fetch API to interact with the OpenRefine server here.
                /*
                // --- Real API call example (would be used here) ---
                try {
                    const formData = new FormData();
                    formData.append("file", file);

                    // 1. Create project
                    const createResponse = await fetch(PROXY_URL + OPENREFINE_SERVER + "/command/core/create-project-from-upload", {
                        method: "POST",
                        body: formData
                    });
                    const project = await createResponse.json();
                    const projectId = project.projectID;

                    // 2. Apply cleaning operations (example: trim whitespace in a column)
                    const operations = [
                        { "op": "core/text-transform", "description": "Trim whitespace", "columnName": "Column 1", "expression": "value.trim()", "onError": "keep-original" }
                    ];
                    await fetch(PROXY_URL + OPENREFINE_SERVER + `/command/core/apply-operations?project=${projectId}`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ operations })
                    });
                    
                    // 3. Export cleaned data
                    const exportResponse = await fetch(PROXY_URL + OPENREFINE_SERVER + `/command/core/export-rows?project=${projectId}&format=csv`);
                    const cleanedData = await exportResponse.text();
                    
                    // 4. Update UI with success
                    updateResultItem(file.name, 'success', 'File berhasil dibersihkan!');
                    updateStats();

                } catch (error) {
                    console.error("Error processing file:", error);
                    updateResultItem(file.name, 'error', 'Gagal memproses file.');
                }
                */

                // --- SIMULATION ---
                setTimeout(() => {
                    const randomOutcome = Math.random() > 0.2 ? 'success' : 'error';
                    if (randomOutcome === 'success') {
                        const errorsFixed = Math.floor(Math.random() * 50) + 1;
                        const sizeOptimized = (Math.random() * 2 + 0.1).toFixed(2);
                        updateResultItem(file.name, 'success', `${errorsFixed} error diperbaiki, ${sizeOptimized} MB dihemat.`);
                        updateStats(errorsFixed, parseFloat(sizeOptimized));
                    } else {
                        updateResultItem(file.name, 'error', 'Format file tidak didukung atau rusak.');
                    }
                }, 1500 + Math.random() * 1500); // Random delay
            }
        }

        function addResultItem(fileName, status) {
            const resultItem = document.createElement('div');
            resultItem.className = 'result-item';
            resultItem.id = `result-${fileName.replace(/\s+/g, '-')}`;
            
            let icon = '';
            if (status === 'processing') {
                icon = '<div class="spinner"></div>';
            }
            
            resultItem.innerHTML = `
                <div class="details">
                    <h4>${fileName}</h4>
                    <p id="status-${fileName.replace(/\s+/g, '-')}">Sedang memproses...</p>
                </div>
                <div class="actions">
                    ${icon}
                </div>
            `;
            resultsContainer.appendChild(resultItem);
        }

        function updateResultItem(fileName, status, message) {
            const itemId = `result-${fileName.replace(/\s+/g, '-')}`;
            const statusId = `status-${fileName.replace(/\s+/g, '-')}`;
            const item = document.getElementById(itemId);
            const statusText = document.getElementById(statusId);

            if (!item) return;

            const actionsDiv = item.querySelector('.actions');
            if (status === 'success') {
                statusText.textContent = message;
                statusText.style.color = 'var(--success-color)';
                actionsDiv.innerHTML = `<button title="Selesai">‚úÖ</button>`;
            } else if (status === 'error') {
                statusText.textContent = message;
                statusText.style.color = 'var(--danger-color)';
                actionsDiv.innerHTML = `<button title="Gagal">‚ùå</button>`;
            }
        }

        function updateStats(errors = 0, size = 0) {
            stats.fileCount++;
            stats.errorsFixed += errors;
            stats.dataOptimized += size;

            document.getElementById('fileCount').textContent = stats.fileCount;
            document.getElementById('errorsFixed').textContent = stats.errorsFixed;
            document.getElementById('dataOptimized').textContent = stats.dataOptimized.toFixed(2) + ' MB';
        }
    </script>
</body>
</html>